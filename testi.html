<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <title>YouTube API Demo</title>
    <script src="https://apis.google.com/js/api.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        padding: 20px;
      }
      h1 {
        color: #cc0000;
      }
      .video {
        background: white;
        border-radius: 12px;
        padding: 10px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      img {
        border-radius: 10px;
        margin-right: 15px;
      }
    </style>
  </head>
  <body>
    <h1>YouTube-haku</h1>
    <input id="query" placeholder="Hakusana..." />
    <button onclick="searchVideos()">Hae</button>

    <div id="results"></div>

    <script>
      function loadClient() {
        gapi.client.setApiKey("AIzaSyC_98L0TNXKqZADRD8WnIxK_Hei3YA9YFA");
        return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
          .then(() => console.log("YouTube API ladattu"));
      }

      function searchVideos() {
        const query = document.getElementById("query").value || "cats";
        gapi.client.youtube.search.list({
          part: "snippet",
          q: query,
          maxResults: 3
        }).then(response => {
          const container = document.getElementById("results");
          container.innerHTML = "";
          response.result.items.forEach(item => {
            const vid = item.id.videoId;
            const title = item.snippet.title;
            const channel = item.snippet.channelTitle;
            const thumb = item.snippet.thumbnails.medium.url;
            const div = document.createElement("div");
            div.className = "video";
            div.innerHTML = `
              <img src="${thumb}" width="160" height="90">
              <div>
                <h3><a href="https://www.youtube.com/watch?v=${vid}" target="_blank">${title}</a></h3>
                <p>${channel}</p>
              </div>
            `;
            container.appendChild(div);
          });
        });
      }

      gapi.load("client", loadClient);
    </script>
  </body>
</html>
